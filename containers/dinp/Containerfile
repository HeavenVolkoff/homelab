# syntax=container/containerfile:1.4

FROM alpine:3.22@sha256:4b7ce07002c69e8f3d704a9c5d6fd3053be500b7f1c69fc0d80990c2ad8dd412

RUN --mount=type=bind,source=./install.sh,target=/tmp/install.sh \
    --mount=type=cache,target=/var/cache/apk \
    /tmp/install.sh

COPY entrypoint.sh /usr/local/bin/

ENTRYPOINT [ "/usr/local/bin/entrypoint.sh" ]

LABEL org.opencontainers.image.title="dind" \
      org.opencontainers.image.authors="VÃ­tor Vasconcellos <vasconcellos.dev@gmail.com>" \
      org.opencontainers.image.revision="1" \
      org.opencontainers.image.licenses="GPL-3.0" \
      org.opencontainers.image.description="Alpine based Docker-in-Docker (DinD) service container with Docker CLI, Docker Compose v2 and GlusterFS client"
